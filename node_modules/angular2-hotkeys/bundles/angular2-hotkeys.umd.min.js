!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("mousetrap"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular2-hotkeys",["exports","@angular/core","rxjs","mousetrap","@angular/common"],t):t((e=e||self)["angular2-hotkeys"]={},e.ng.core,e.rxjs,null,e.ng.common)}(this,(function(e,t,o,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],r=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a=function(){function e(e,t,o,r,n,i){this.combo=e,this.callback=t,this.allowIn=o,this.description=r,this.action=n,this.persistent=i,this.combo=Array.isArray(e)?e:[e],this.allowIn=o||[],this.description=r||""}return e.symbolize=function(e){for(var t={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",backspace:"⌫"},o=e.split("+"),r=0;r<o.length;r++)"mod"===o[r]&&(window.navigator&&window.navigator.platform.indexOf("Mac")>=0?o[r]="command":o[r]="ctrl"),o[r]=t[o[r]]||o[r];return o.join(" + ")},Object.defineProperty(e.prototype,"formatted",{get:function(){if(!this.formattedHotkey){for(var t=this.combo,o=0;o<t.length;o++)t[o]=e.symbolize(t[o]);this.formattedHotkey=t}return this.formattedHotkey},enumerable:!0,configurable:!0}),e}(),l=new t.InjectionToken("HotkeyOptions"),c=function(){function e(e){this.options=e,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new o.Subject,this.preventIn=["INPUT","SELECT","TEXTAREA"],Mousetrap.prototype.stopCallback=function(e,t,o,r){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(t.contentEditable&&"true"===t.contentEditable)},this.mousetrap=new Mousetrap,this.options.disableCheatSheet||this.add(new a(this.options.cheatSheetHotkey||"?",function(e){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new a("esc",function(e){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription||"Hide this help menu"))}var r,n;return e.prototype.add=function(e,t){var o,r,n=this;if(Array.isArray(e)){var i=[];try{for(var a=s(e),l=a.next();!l.done;l=a.next()){var c=l.value;i.push(this.add(c,t))}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}return this.remove(e),this.hotkeys.push(e),this.mousetrap.bind(e.combo,(function(t,o){var r=!0;if(t){var i=t.target||t.srcElement,s=i.nodeName.toUpperCase();(" "+i.className+" ").indexOf(" mousetrap ")>-1?r=!0:n.preventIn.indexOf(s)>-1&&-1===e.allowIn.map((function(e){return e.toUpperCase()})).indexOf(s)&&(r=!1)}if(r)return e.callback.apply(n,[t,o])}),t),e},e.prototype.remove=function(e){var t,o,r,n,i=[];if(!e){try{for(var a=s(this.hotkeys),l=a.next();!l.done;l=a.next()){var c=l.value;i.push(this.remove(c))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(t)throw t.error}}return i}if(Array.isArray(e)){try{for(var h=s(e),p=h.next();!p.done;p=h.next()){c=p.value;i.push(this.remove(c))}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return i}var u=this.findHotkey(e);return u>-1?(this.hotkeys.splice(u,1),this.mousetrap.unbind(e.combo),e):null},e.prototype.get=function(e){var t,o,r,n;if(!e)return this.hotkeys;if(Array.isArray(e)){var i=[];try{for(var a=s(e),l=a.next();!l.done;l=a.next()){var c=l.value;i.push(this.get(c))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(t)throw t.error}}return i}try{for(var h=s(this.hotkeys),p=h.next();!p.done;p=h.next()){var u=p.value;if(u.combo.indexOf(e)>-1)return u}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return null},e.prototype.pause=function(e){var t,o;if(!e)return this.pause(this.hotkeys);if(Array.isArray(e)){var r=[];try{for(var n=s(e),i=n.next();!i.done;i=n.next()){var a=i.value;r.push(this.pause(a))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return r}return this.remove(e),this.pausedHotkeys.push(e),e},e.prototype.unpause=function(e){var t,o;if(!e)return this.unpause(this.pausedHotkeys);if(Array.isArray(e)){var r=[];try{for(var n=s(e),i=n.next();!i.done;i=n.next()){var a=i.value;r.push(this.unpause(a))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(o=n.return)&&o.call(n)}finally{if(t)throw t.error}}return r}var l=this.pausedHotkeys.indexOf(e);return l>-1?(this.add(e),this.pausedHotkeys.splice(l,1)):null},e.prototype.reset=function(){this.mousetrap.reset()},e.prototype.findHotkey=function(e){return this.hotkeys.indexOf(e)},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[l]}]}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](l))},token:e,providedIn:"root"}),e=i([t.Injectable({providedIn:"root"}),(r=0,n=t.Inject(l),function(e,t){n(e,t,r)})],e)}(),h=function(){function e(e,t){this.hotkeysService=e,this.elementRef=t,this.hotkeysList=[],this.oldHotkeys=[],this.mousetrap=new Mousetrap(this.elementRef.nativeElement)}return e.prototype.ngOnInit=function(){var e,t;try{for(var o=s(this.hotkeys),r=o.next();!r.done;r=o.next()){var n=r.value,i=Object.keys(n)[0],l=new a(i,n[i]),c=this.hotkeysService.get(i);null!==c&&(this.oldHotkeys.push(c),this.hotkeysService.remove(c)),this.hotkeysList.push(l),this.mousetrap.bind(l.combo,l.callback)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.ngOnDestroy=function(){var e,t;try{for(var o=s(this.hotkeysList),r=o.next();!r.done;r=o.next()){var n=r.value;this.mousetrap.unbind(n.combo)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.hotkeysService.add(this.oldHotkeys)},e.ctorParameters=function(){return[{type:c},{type:t.ElementRef}]},i([t.Input()],e.prototype,"hotkeys",void 0),e=i([t.Directive({selector:"[hotkeys]",providers:[c]})],e)}(),p=function(){function e(e){this.hotkeysService=e,this.helpVisible=!1,this.title="Keyboard Shortcuts:"}return e.prototype.ngOnInit=function(){var e=this;this.subscription=this.hotkeysService.cheatSheetToggle.subscribe((function(t){!1!==t&&(e.hotkeys=e.hotkeysService.hotkeys.filter((function(e){return e.description}))),!1===t?e.helpVisible=!1:e.toggleCheatSheet()}))},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},e.prototype.toggleCheatSheet=function(){this.helpVisible=!this.helpVisible},e.ctorParameters=function(){return[{type:c}]},i([t.Input()],e.prototype,"title",void 0),e=i([t.Component({selector:"hotkeys-cheatsheet",template:'<div class="cfp-hotkeys-container fade" [ngClass]="{\'in\': helpVisible}" style="display:none">\n    <div class="cfp-hotkeys">\n        <h4 class="cfp-hotkeys-title">{{ title }}</h4>\n        <table>\n            <tbody>\n            <tr *ngFor="let hotkey of hotkeys">\n                <td class="cfp-hotkeys-keys">\n                    <span *ngFor="let key of hotkey.formatted" class="cfp-hotkeys-key">{{ key }}</span>\n                </td>\n                <td class="cfp-hotkeys-text">{{ hotkey.description }}</td>\n            </tr>\n            </tbody>\n        </table>\n        <div class="cfp-hotkeys-close" (click)="toggleCheatSheet()">&#215;</div>\n    </div>\n</div>\n',styles:[".cfp-hotkeys-container{display:table!important;position:fixed;width:100%;height:100%;top:0;left:0;color:#333;font-size:1em;background-color:rgba(255,255,255,.9)}.cfp-hotkeys-container.fade{z-index:-1024;visibility:hidden;opacity:0;-webkit-transition:opacity .15s linear;transition:opacity .15s linear}.cfp-hotkeys-container.fade.in{z-index:10002;visibility:visible;opacity:1}.cfp-hotkeys-title{font-weight:700;text-align:center;font-size:1.2em}.cfp-hotkeys{width:100%;height:100%;display:table-cell;vertical-align:middle}.cfp-hotkeys table{margin:auto;color:#333}.cfp-content{display:table-cell;vertical-align:middle}.cfp-hotkeys-keys{padding:5px;text-align:right}.cfp-hotkeys-key{display:inline-block;color:#fff;background-color:#333;border:1px solid #333;border-radius:5px;text-align:center;margin-right:5px;box-shadow:inset 0 1px 0 #666,0 1px 0 #bbb;padding:5px 9px;font-size:1em}.cfp-hotkeys-text{padding-left:10px;font-size:1em}.cfp-hotkeys-close{position:fixed;top:20px;right:20px;font-size:2em;font-weight:700;padding:5px 10px;border:1px solid #ddd;border-radius:5px;min-height:45px;min-width:45px;text-align:center}.cfp-hotkeys-close:hover{background-color:#fff;cursor:pointer}@media all and (max-width:500px){.cfp-hotkeys{font-size:.8em}}@media all and (min-width:750px){.cfp-hotkeys{font-size:1.2em}}"]})],e)}(),u=function(){function e(){}var o;return o=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:o,providers:[c,{provide:l,useValue:e}]}},e=o=i([t.NgModule({declarations:[h,p],imports:[n.CommonModule],exports:[h,p]})],e)}();e.Hotkey=a,e.HotkeyModule=u,e.HotkeyOptions=l,e.HotkeysCheatsheetComponent=p,e.HotkeysDirective=h,e.HotkeysService=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2-hotkeys.umd.min.js.map